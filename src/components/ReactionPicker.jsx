import React from 'react';
import { View, Text, TouchableOpacity, StyleSheet, Modal, Pressable, ScrollView } from 'react-native';
import { LinearGradient } from 'expo-linear-gradient';

const EMOJI_CATEGORIES = {
  Smileys: [
    'ğŸ˜€','ğŸ˜ƒ','ğŸ˜„','ğŸ˜','ğŸ˜†','ğŸ˜…','ğŸ¤£','ğŸ˜‚','ğŸ™‚','ğŸ™ƒ','ğŸ˜‰','ğŸ˜Š','ğŸ˜‡','ğŸ¥°','ğŸ˜','ğŸ¤©','ğŸ˜˜','ğŸ˜—','ğŸ˜š','ğŸ˜™','ğŸ˜‹','ğŸ˜›','ğŸ˜œ','ğŸ¤ª','ğŸ˜','ğŸ¤‘','ğŸ¤—','ğŸ¤­','ğŸ¤«','ğŸ¤”','ğŸ¤','ğŸ¤¨','ğŸ˜','ğŸ˜‘','ğŸ˜¶','ğŸ˜','ğŸ˜’','ğŸ™„','ğŸ˜¬','ğŸ¤¥','ğŸ˜”','ğŸ˜ª','ğŸ¤¤','ğŸ˜´','ğŸ˜·','ğŸ¤’','ğŸ¤•','ğŸ¤¢','ğŸ¤®','ğŸ¤§','ğŸ¥µ','ğŸ¥¶','ğŸ¥´','ğŸ˜µ','ğŸ¤¯','ğŸ¤ ','ğŸ¥³','ğŸ˜','ğŸ¤“','ğŸ§','ğŸ˜•','ğŸ˜Ÿ','ğŸ™','â˜¹ï¸','ğŸ˜®','ğŸ˜¯','ğŸ˜²','ğŸ˜³','ğŸ¥º','ğŸ˜¢','ğŸ˜­','ğŸ˜¤','ğŸ˜ ','ğŸ˜¡','ğŸ¤¬','ğŸ¤¡','ğŸ‘»','ğŸ’€','â˜ ï¸','ğŸ‘½','ğŸ¤–','ğŸ’©',
  ],
  Hearts: [
    'â¤ï¸','ğŸ§¡','ğŸ’›','ğŸ’š','ğŸ’™','ğŸ’œ','ğŸ–¤','ğŸ¤','ğŸ¤','ğŸ’”','â£ï¸','ğŸ’•','ğŸ’','ğŸ’“','ğŸ’—','ğŸ’–','ğŸ’˜','ğŸ’','ğŸ’Ÿ','ğŸ’Œ','ğŸ’‹','ğŸ’˜','ğŸ’‘','ğŸ’',
  ],
  Gestures: [
    'ğŸ‘','ğŸ‘','ğŸ‘Œ','ğŸ¤Œ','ğŸ¤','âœŒï¸','ğŸ¤','ğŸ¤Ÿ','ğŸ¤˜','ğŸ¤™','ğŸ‘ˆ','ğŸ‘‰','ğŸ‘†','ğŸ–•','ğŸ‘‡','â˜ï¸','ğŸ‘‹','ğŸ¤š','ğŸ–ï¸','âœ‹','ğŸ––','ğŸ‘','ğŸ™Œ','ğŸ¤²','ğŸ¤','ğŸ™','ğŸ’…','ğŸ¤³','ğŸ’ª','ğŸ«¶','ğŸ«°','ğŸ¤Œ','ğŸ«µ',
  ],
  People: [
    'ğŸ‘¶','ğŸ§’','ğŸ‘¦','ğŸ‘§','ğŸ§‘','ğŸ‘±â€â™€ï¸','ğŸ‘±â€â™‚ï¸','ğŸ‘¨','ğŸ‘©','ğŸ§”','ğŸ§‘â€ğŸ¦°','ğŸ§‘â€ğŸ¦±','ğŸ§‘â€ğŸ¦³','ğŸ§‘â€ğŸ¦²','ğŸ‘¨â€ğŸ¦°','ğŸ‘©â€ğŸ¦°','ğŸ‘¨â€ğŸ¦±','ğŸ‘©â€ğŸ¦±','ğŸ‘¨â€ğŸ¦³','ğŸ‘©â€ğŸ¦³','ğŸ‘¨â€ğŸ¦²','ğŸ‘©â€ğŸ¦²','ğŸ‘¯','ğŸ‘¯â€â™‚ï¸','ğŸ‘¯â€â™€ï¸','ğŸ‘«','ğŸ‘­','ğŸ‘¬','ğŸ‘©â€â¤ï¸â€ğŸ‘¨','ğŸ‘©â€â¤ï¸â€ğŸ‘©','ğŸ‘¨â€â¤ï¸â€ğŸ‘¨','ğŸ‘¨â€ğŸ‘©â€ğŸ‘§','ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦','ğŸ‘©â€ğŸ‘¦','ğŸ‘¨â€ğŸ‘¦','ğŸ§','ğŸ§â€â™‚ï¸','ğŸ§â€â™€ï¸','ğŸ§','ğŸ§â€â™‚ï¸','ğŸ§â€â™€ï¸','ğŸƒ','ğŸƒâ€â™‚ï¸','ğŸƒâ€â™€ï¸','ğŸ’ƒ','ğŸ•º','ğŸ•´ï¸',
  ],
  Animals: [
    'ğŸ¶','ğŸ±','ğŸ­','ğŸ¹','ğŸ°','ğŸ¦Š','ğŸ»','ğŸ¼','ğŸ¨','ğŸ¯','ğŸ¦','ğŸ®','ğŸ·','ğŸ½','ğŸ¸','ğŸµ','ğŸ™ˆ','ğŸ™‰','ğŸ™Š','ğŸ’','ğŸ”','ğŸ§','ğŸ¦','ğŸ¤','ğŸ£','ğŸ¥','ğŸ¦†','ğŸ¦…','ğŸ¦‰','ğŸ¦‡','ğŸº','ğŸ—','ğŸ´','ğŸ¦„','ğŸ','ğŸ›','ğŸ¦‹','ğŸŒ','ğŸ','ğŸœ','ğŸª²','ğŸ•·ï¸','ğŸ•¸ï¸',
  ],
  Food: [
    'ğŸ','ğŸ','ğŸ','ğŸŠ','ğŸ‹','ğŸŒ','ğŸ‰','ğŸ‡','ğŸ“','ğŸ«','ğŸ’','ğŸ‘','ğŸ¥­','ğŸ','ğŸ¥¥','ğŸ¥','ğŸ…','ğŸ†','ğŸ¥‘','ğŸ¥¦','ğŸ¥¬','ğŸ¥•','ğŸŒ½','ğŸ¥”','ğŸ ','ğŸ¥','ğŸ','ğŸ¥–','ğŸ¥¨','ğŸ¥¯','ğŸ§€','ğŸ¥š','ğŸ³','ğŸ¥','ğŸ§‡','ğŸ¥“','ğŸ¥©','ğŸ—','ğŸ–','ğŸŒ­','ğŸ”','ğŸŸ','ğŸ•','ğŸ¥ª','ğŸ¥™','ğŸŒ®','ğŸŒ¯','ğŸ¥—',
  ],
  Activities: [
    'âš½','ğŸ€','ğŸˆ','âš¾','ğŸ¾','ğŸ','ğŸ‰','ğŸ±','ğŸ“','ğŸ¸','ğŸ¥…','ğŸ’','ğŸ‘','ğŸ','ğŸ¥','â›³','ğŸª','ğŸ¹','ğŸ£','ğŸ¤¿','ğŸ¥Š','ğŸ¥‹','ğŸ½','ğŸ›¹','ğŸ›¼','ğŸ›·','â›¸ï¸','ğŸ¿','ğŸ‚','ğŸª‚','ğŸ‹ï¸','ğŸ‹ï¸â€â™‚ï¸','ğŸ‹ï¸â€â™€ï¸','ğŸ¤¼','ğŸ¤¼â€â™‚ï¸','ğŸ¤¼â€â™€ï¸','ğŸ¤¸','ğŸ¤¸â€â™‚ï¸','ğŸ¤¸â€â™€ï¸','â›¹ï¸','â›¹ï¸â€â™‚ï¸','â›¹ï¸â€â™€ï¸','ğŸ¤º','ğŸ¤¾','ğŸ¤¾â€â™‚ï¸','ğŸ¤¾â€â™€ï¸','ğŸŒï¸','ğŸ‡','ğŸŠ','ğŸŠâ€â™‚ï¸','ğŸŠâ€â™€ï¸',
  ],
  Travel: [
    'ğŸš—','ğŸš•','ğŸš™','ğŸšŒ','ğŸš','ğŸï¸','ğŸš“','ğŸš‘','ğŸš’','ğŸš','ğŸšš','ğŸš›','ğŸšœ','ğŸ›»','ğŸš²','ğŸ›´','ğŸ›µ','ğŸï¸','ğŸ›º','ğŸš¨','ğŸš”','ğŸš','ğŸš˜','ğŸš–','âœˆï¸','ğŸ›©ï¸','ğŸ›«','ğŸ›¬','ğŸš','ğŸšŸ','ğŸš ','ğŸš¡','ğŸš‚','ğŸš†','ğŸš‡','ğŸšŠ','ğŸš‰','ğŸš„','ğŸš…','ğŸšˆ','ğŸš','ğŸš','â›µ','ğŸš¤','ğŸ›¥ï¸','â›´ï¸','ğŸ›³ï¸','ğŸš¢',
  ],
  Objects: [
    'ğŸ“±','ğŸ“²','ğŸ’»','âŒ¨ï¸','ğŸ–¥ï¸','ğŸ–¨ï¸','ğŸ–±ï¸','ğŸ•¹ï¸','ğŸ—œï¸','ğŸ’½','ğŸ’¾','ğŸ’¿','ğŸ“€','ğŸ“¼','ğŸ“·','ğŸ“¸','ğŸ“¹','ğŸ¥','ğŸ“','â˜ï¸','ğŸ“Ÿ','ğŸ“ ','ğŸ“º','ğŸ“»','ğŸ™ï¸','ğŸšï¸','ğŸ›ï¸','â±ï¸','â²ï¸','â°','ğŸ•°ï¸','âŒš','ğŸ“¡','ğŸ”‹','ğŸ”Œ','ğŸ’¡','ğŸ”¦','ğŸ•¯ï¸','ğŸ§¯','ğŸ›¢ï¸','ğŸ’¸','ğŸ’µ','ğŸ’´','ğŸ’¶','ğŸ’·','ğŸ’°','ğŸ’³','ğŸª™',
  ],
  Symbols: [
    'â¤ï¸','ğŸ’›','ğŸ’š','ğŸ’™','ğŸ’œ','ğŸ–¤','ğŸ¤','ğŸ¤','ğŸ’”','â£ï¸','ğŸ’•','ğŸ’','ğŸ’“','ğŸ’—','ğŸ’–','ğŸ’˜','ğŸ’','ğŸ’Ÿ','ğŸ’¯','âœ”ï¸','âŒ','âœ…','â','âš ï¸','âš¡','ğŸ”¥','â­','ğŸŒŸ','âœ¨','ğŸ’¥','ğŸ””','ğŸ”•','ğŸ’­','ğŸ—¯ï¸','ğŸ’¬','ğŸ•‰ï¸','â˜¸ï¸','âœ¡ï¸','â˜¯ï¸','â˜®ï¸','â˜¢ï¸','â˜£ï¸','â™ˆ','â™‰','â™Š','â™‹','â™Œ','â™','â™','â™','â™','â™‘','â™’','â™“',
  ],
};

export default function ReactionPicker({ visible, onClose, onSelectEmoji, position }) {
  return (
    <Modal
      visible={visible}
      transparent
      animationType="fade"
      onRequestClose={onClose}
    >
      <Pressable style={styles.overlay} onPress={onClose}>
        <View style={styles.container}>
          <LinearGradient
            colors={['rgba(255, 255, 255, 0.98)', 'rgba(255, 255, 255, 0.95)']}
            style={styles.picker}
            start={{ x: 0, y: 0 }}
            end={{ x: 1, y: 1 }}
          >
            <Text style={styles.title}>Choose Reaction</Text>
            <ScrollView 
              style={styles.scrollView}
              showsVerticalScrollIndicator={false}
            >
              {Object.entries(EMOJI_CATEGORIES).map(([category, emojis]) => (
                <View key={category} style={styles.category}>
                  <Text style={styles.categoryTitle}>{category}</Text>
                  <View style={styles.emojiGrid}>
                    {emojis.map((emoji, index) => (
                      <TouchableOpacity
                        key={`${emoji}-${index}`}
                        style={styles.emojiButton}
                        onPress={() => {
                          onSelectEmoji(emoji);
                          onClose();
                        }}
                      >
                        <Text style={styles.emoji}>{emoji}</Text>
                      </TouchableOpacity>
                    ))}
                  </View>
                </View>
              ))}
            </ScrollView>
          </LinearGradient>
        </View>
      </Pressable>
    </Modal>
  );
}

const styles = StyleSheet.create({
  overlay: {
    flex: 1,
    backgroundColor: 'rgba(0, 0, 0, 0.4)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  container: {
    width: '85%',
    maxHeight: '70%',
  },
  picker: {
    borderRadius: 20,
    padding: 20,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 4 },
    shadowOpacity: 0.15,
    shadowRadius: 12,
    elevation: 8,
    borderWidth: 1,
    borderColor: 'rgba(255, 214, 242, 0.3)',
  },
  title: {
    fontSize: 18,
    fontWeight: '700',
    color: '#7C2B86',
    textAlign: 'center',
    marginBottom: 16,
  },
  scrollView: {
    maxHeight: 400,
  },
  category: {
    marginBottom: 20,
  },
  categoryTitle: {
    fontSize: 14,
    fontWeight: '600',
    color: '#7C2B86',
    marginBottom: 8,
    marginLeft: 4,
  },
  emojiGrid: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    justifyContent: 'flex-start',
  },
  emojiButton: {
    width: 40,
    height: 40,
    borderRadius: 20,
    alignItems: 'center',
    justifyContent: 'center',
    margin: 3,
    backgroundColor: 'rgba(255, 214, 242, 0.1)',
  },
  emoji: {
    fontSize: 22,
  },
});
